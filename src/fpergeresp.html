<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <!-- Cabeçalho -->
    <header class="cabecalho navbar navbar-expand-lg navbar-light">
      <div class="container-fluid">
        <div>
          <img src="imgs/alcance (2).png" alt="" width="" class="logoalcance">
        </div>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <form class="d-flex mx-auto my-2 my-lg-0">
            <input class="pesquisa1 form-control" type="search" placeholder="Pesquise aqui" aria-label="Search">
            <button class="bpesquisa btn btn-outline-dark mx-2" type="submit">Pesquisar</button>
          </form>
          <nav class="mcabecalho navbar-nav">
            <a class="nav-link text-dark" href="flogin.html">Entrar</a>
            <a class="nav-link text-dark" href="fcadastro.html">Criar Conta</a>
            <a class="nav-link text-dark" href="fpaginaminhaconta.html">Minha Conta</a>
          </nav>
        </div>
      </div>
    </header>

    <!-- Parte central do site -->
    <main>
      <!-- Menu Lateral -->
      <aside>
        <div class="menulateral-duvidas">
          <a></a>
          <a></a>
          <br>
          <h2 href="#"> &nbsp &nbsp &nbsp Dúvida dos Usuários &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
          </svg></h2>
          <a></a>
          <a></a>
          <a></a>
        </div>
      
        <!-- Parte Central -->
        <div>
          <ul class="containerperguntas">
            <div class="resposta-form">
              <form id="respostaForm">
                <input id="respostaInput" type="text" placeholder="Digite sua resposta" required>
                <button id="respostaButton" type="submit">Enviar</button>
              </form>
            </div>
          </ul>
        </div>

        <template class="templateperg">
          <div class="central">
            <div class="perguntas">
              <h2 class="coresperguntas"></h2>
            </div>
          </div>
        </template>

        <div class="botaoretornar">
          <a href="home.html">
            <button>Retornar a página principal</button>
          </a>
        </div>
      </aside>
    </main>

    <!-- Rodapé -->
    <footer class="rodape">
      <div class="container-footer">
        <div class="row-footer">
          <div class="footer-col mt-5">
            <a href="fsobre_nos.html">Sobre Nós</a>
          </div>
          <div class="footer-col mt-5">
            <a href="faprendaaqui.html">Aprenda aqui</a>
          </div>
          <div class="footer-col mt-5">
            <a href="fpoliticaseregrasdosite.html">Política e Regras de Uso</a>
          </div>
          <div class="footer-col">
            <div class="form-sub">
              <form id="formulario">
                <input id="formularioInput" type="text" placeholder="Informe sua dúvida aqui" required>
                <button id="formularioButton" type="submit">Enviar</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script defer>
      let containerperguntas = document.querySelector(".containerperguntas");
      let formulario = document.querySelector("#formulario");
      let formularioInput = document.querySelector("#formularioInput"); 
      let formularioButton = document.querySelector("#formularioButton");
      let templateperg = document.querySelector(".templateperg");

      formularioButton.addEventListener("click", (event) => {
        event.preventDefault();
        let templateClone = templateperg.content.cloneNode(true);
        let templateCloneh2 = templateClone.querySelector("h2");
        templateCloneh2.textContent = formularioInput.value;
        containerperguntas.appendChild(templateClone);

        let pergunta = {
          perguntas: `${formularioInput.value}`,
          data: "21/06/2023",
          disponibilidade: 1,
        }
        adicionarPerguntas(pergunta);
        formularioInput.value = "";
      })

      async function listarPerguntas(){
        let templateperg = document.querySelector(".templateperg");
        const response = await fetch("https://6492be81428c3d2035d09aa0.mockapi.io/perguntas", {
          method: "GET"
        });
        if(response.status == 200){
          const data = await response.json();
          data.forEach(item => {
            let templateClone = templateperg.content.cloneNode(true);
            let templateCloneh2 = templateClone.querySelector("h2");
            templateCloneh2.textContent = item.perguntas;
            containerperguntas.appendChild(templateCloneh2);
          });
        }
      }
      listarPerguntas();

      async function adicionarPerguntas(pergunta){
        const responsePost = await fetch("https://6492be81428c3d2035d09aa0.mockapi.io/perguntas",{
          method: "POST",
          headers: {'content-type':'application/json'},
          body: JSON.stringify(pergunta)   
        });
      }

      async function listarRespostas() {
        const response = await fetch("https://6492be81428c3d2035d09aa0.mockapi.io/respostas", {
          method: "GET"
        });

        if (response.ok) {
          const data = await response.json();
          data.forEach(item => {
            const respostaElement = document.createElement("div");
            respostaElement.classList.add("resposta");
            respostaElement.textContent = item.resposta;

            containerperguntas.appendChild(respostaElement);
          });
        } else {
          console.error("Erro ao obter as respostas da API.");
        }
      }

      let respostaForm = document.querySelector("#respostaForm");
      let respostaInput = document.querySelector("#respostaInput");
      let respostaButton = document.querySelector("#respostaButton");

      respostaForm.addEventListener("submit", (event) => {
        event.preventDefault();
        let resposta = respostaInput.value;
        adicionarResposta({ resposta });
        respostaInput.value = "";
      });

      async function adicionarResposta(resposta) {
        const response = await fetch("https://6492be81428c3d2035d09aa0.mockapi.io/respostas", {
          method: "POST",
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(resposta)
        });

        if (response.ok) {
          console.log("Resposta adicionada com sucesso!");
          const respostaElement = document.createElement("div");
          respostaElement.classList.add("resposta");
          respostaElement.textContent = resposta.resposta;

          containerperguntas.appendChild(respostaElement);
        } else {
          console.error("Erro ao adicionar a resposta na API.");
        }
      }

      listarRespostas();
    </script>
</html>
